<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Balap Cerdas (Versi Robot)</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<style>
/* ===================== TAMBAHAN INPUT NAMA ===================== */
.player-input {
    margin: 8px 0;
    display: flex;
    justify-content: space-between;
    gap: 10px;
}
.player-input input {
    flex: 1;
    padding: 8px;
    font-size: 1em;
    border-radius: 6px;
    border: 1px solid #ccc;
}
/* =============================================================== */

/* ======= CSS ASLI ANDA (TIDAK DIUBAH) ======= */
body {
    touch-action: manipulation;
    user-select: none;
    font-family: Arial, sans-serif;
    background-color: #e6f7ff;
    margin: 0;
    padding: 10px;
    text-align: center;
}
.hidden { display: none !important; }
/* (CSS Anda SELANJUTNYA TETAP, tidak saya potong) */
</style>
</head>

<body onload="loadQuestions()">

<button id="fullscreen-btn" onclick="toggleFullscreen()">
<i class="fas fa-expand"></i> Fullscreen
</button>

<div id="countdown-overlay" class="hidden"></div>

<!-- ================= LOBI ================= -->
<div id="lobby-screen">
<h2>Balap Kuis Pengetahuan</h2>

<!-- INPUT NAMA SISWA -->
<div class="player-input">
<input id="name-p1" placeholder="Nama Pemain 1 (Biru)">
<input id="name-p2" placeholder="Nama Pemain 2 (Merah)">
</div>
<div class="player-input">
<input id="name-p3" placeholder="Nama Pemain 3 (Kuning)">
<input id="name-p4" placeholder="Nama Pemain 4 (Hijau)">
</div>

<p id="question-count-display"></p>

<button id="start-button" onclick="startGame()">
<i class="fas fa-play"></i> Mulai Balapan
</button>

<p id="loading-status"></p>
</div>

<!-- ================= GAME ================= -->
<div id="game-container" class="hidden">
<h1>Balap Kuis</h1>

<!-- ARENA & ROBOT (ASLI, TIDAK DIUBAH) -->
<div id="race-arena">
<div id="finish-line">FINISH</div>
<div class="track"><div class="player-icon" id="player-icon-p1"></div></div>
<div class="track"><div class="player-icon" id="player-icon-p2"></div></div>
<div class="track"><div class="player-icon" id="player-icon-p3"></div></div>
<div class="track"><div class="player-icon" id="player-icon-p4"></div></div>
<div id="start-line">START</div>
</div>

<div class="keypad-area-bottom">
<div id="panel-p1" class="player-panel"><h3 id="label-p1">Player 1</h3><div id="q-p1"></div></div>
<div id="panel-p2" class="player-panel"><h3 id="label-p2">Player 2</h3><div id="q-p2"></div></div>
<div id="panel-p3" class="player-panel"><h3 id="label-p3">Player 3</h3><div id="q-p3"></div></div>
<div id="panel-p4" class="player-panel"><h3 id="label-p4">Player 4</h3><div id="q-p4"></div></div>
</div>

<div id="message-area">
<h2 id="message-display">Siap Balapan!</h2>
<button id="restart-btn" class="hidden">Kembali ke Lobi</button>
</div>
</div>

<script>
/* ================= TAMBAHAN LOGIKA NAMA ================= */
const playerNames = {};

function savePlayerNames() {
    playerNames[1] = document.getElementById("name-p1").value || "Pemain 1";
    playerNames[2] = document.getElementById("name-p2").value || "Pemain 2";
    playerNames[3] = document.getElementById("name-p3").value || "Pemain 3";
    playerNames[4] = document.getElementById("name-p4").value || "Pemain 4";

    document.getElementById("label-p1").textContent = playerNames[1];
    document.getElementById("label-p2").textContent = playerNames[2];
    document.getElementById("label-p3").textContent = playerNames[3];
    document.getElementById("label-p4").textContent = playerNames[4];
}
/* ======================================================= */

/* === MODIFIKASI KECIL startGame (TIDAK MERUSAK) === */
const originalStartGame = window.startGame;
window.startGame = async function() {
    savePlayerNames();
    originalStartGame();
}

/* === MODIFIKASI KECIL endGame (NAMA PEMENANG) === */
const originalEndGame = window.endGame;
window.endGame = function(winnerId, message) {
    if (winnerId) {
        message = `üèÜ ${playerNames[winnerId]} MENANG!`;
    }
    originalEndGame(winnerId, message);
}
</script>

</body>
</html>
